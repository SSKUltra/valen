<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Day 4: Teddy Claw Machine</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --neon-pink: #ff00de;
            --neon-blue: #00ffff;
            --cabinet-bg: #2d1b2e;
            --glass: rgba(255, 255, 255, 0.1);
        }

        body {
            margin: 0;
            background: #1a1a2e;
            color: white;
            font-family: 'Poppins', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            justify-content: center;
            overflow: hidden;
        }

        h1 {
            font-family: 'Press Start 2P', cursive;
            color: var(--neon-pink);
            text-shadow: 0 0 10px var(--neon-pink);
            font-size: 1.5rem;
            margin-bottom: 20px;
            text-align: center;
            line-height: 1.5;
        }

        /* ARCADE CABINET */
        .arcade-machine {
            background: var(--cabinet-bg);
            border: 4px solid var(--neon-blue);
            box-shadow: 0 0 20px var(--neon-blue);
            border-radius: 20px 20px 0 0;
            width: 320px;
            height: 500px;
            position: relative;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .glass-case {
            flex: 1;
            background: rgba(0,0,0,0.3);
            position: relative;
            border-bottom: 4px solid var(--neon-blue);
            overflow: hidden;
        }

        /* CLAW MECHANISM */
        .claw-rod {
            width: 6px;
            height: 60px;
            background: #aaa;
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            transition: height 1s ease;
            z-index: 2;
        }

        .claw {
            width: 50px;
            height: 40px;
            position: absolute;
            bottom: -40px;
            left: -22px; /* Center relative to rod */
            transition: transform 0.2s;
        }

        .claw-svg {
            width: 100%;
            height: 100%;
            fill: silver;
            filter: drop-shadow(0 2px 2px rgba(0,0,0,0.5));
        }

        .claw.grabbing .claw-left { transform: rotate(15deg); }
        .claw.grabbing .claw-right { transform: rotate(-15deg); }

        /* PRIZES */
        .prize-area {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 80px;
            display: flex;
            justify-content: space-around;
            align-items: flex-end;
            padding-bottom: 10px;
        }

        .bear {
            font-size: 40px; /* Slightly smaller to fit more */
            cursor: pointer;
            transition: all 0.3s;
            position: absolute;
            bottom: 10px;
        }

        /* CONTROLS */
        .controls-area {
            height: 120px;
            background: #222;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 10px;
        }

        .joystick-row {
            display: flex;
            gap: 20px;
        }

        .btn {
            background: #ff0055;
            border: none;
            border-bottom: 4px solid #990033;
            color: white;
            padding: 10px 15px;
            border-radius: 10px;
            font-family: 'Press Start 2P', cursive;
            font-size: 0.8rem;
            cursor: pointer;
            active: translate(0, 2px);
        }

        .btn:active {
            border-bottom: 0;
            transform: translateY(4px);
        }

        .btn-grab {
            background: #00ff00;
            border-color: #009900;
            font-size: 1rem;
            padding: 15px 30px;
            color: black;
            box-shadow: 0 0 10px #00ff00;
        }

        /* MODAL */
        .modal {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 100;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .modal-content {
            background: white;
            color: #333;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            max-width: 300px;
            animation: popIn 0.5s ease;
            box-shadow: 0 0 50px var(--neon-pink);
            border: 4px solid var(--neon-pink);
        }

        .won-bear { font-size: 80px; display: block; margin: 10px 0; animation: bounce 1s infinite; }

        .wa-btn {
            background: #25D366;
            color: white;
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 50px;
            font-weight: 600;
            display: inline-block;
            margin-top: 15px;
            font-family: sans-serif;
        }

        @keyframes popIn { 0% { transform: scale(0); } 100% { transform: scale(1); } }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        @keyframes flash { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }

        .scanlines {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%);
            background-size: 100% 4px;
            pointer-events: none;
            z-index: 10;
        }
    </style>
</head>
<body>

    <h1>TEDDY<br>ZONE</h1>

    <div class="arcade-machine">
        <div class="scanlines"></div>
        <div class="glass-case">
            <!-- The Claw Rig -->
            <div id="rig" style="position: absolute; left: 50%; top: 0; transition: left 0.3s linear;">
                <div class="claw-rod" id="rod"></div>
                <div class="claw" id="claw">
                    <svg viewBox="0 0 100 80" class="claw-svg">
                        <path d="M50 0 L50 20 M20 80 Q10 40 50 20 Q90 40 80 80" stroke="silver" stroke-width="5" fill="none" />
                        <circle cx="50" cy="20" r="5" fill="#555" />
                        <!-- Fingers -->
                        <path id="finger-left" d="M20 80 Q15 60 40 30" stroke="silver" stroke-width="5" fill="none" />
                        <path id="finger-right" d="M80 80 Q85 60 60 30" stroke="silver" stroke-width="5" fill="none" />
                    </svg>
                </div>
            </div>

            <!-- Prizes -->
            <div class="prize-area">
                <div class="bear" id="bear1" style="left: 10%;">üß∏</div>
                <div class="bear" id="bear2" style="left: 35%;">üêº</div>
                <div class="bear" id="bear3" style="left: 60%;">üê®</div>
                <div class="bear" id="bear4" style="left: 85%;">üêª‚Äç‚ùÑÔ∏è</div>
            </div>
        </div>

        <div class="controls-area">
            <div class="joystick-row">
                <button class="btn" onclick="move('left')">‚¨ÖÔ∏è</button>
                <button class="btn" onclick="move('right')">‚û°Ô∏è</button>
            </div>
            <button class="btn btn-grab" id="grabBtn" onclick="grab()">GRAB!</button>
        </div>
    </div>

    <!-- WIN MODAL -->
    <div id="winModal" class="modal">
        <div class="modal-content">
            <h2 style="font-family: 'Press Start 2P'; font-size: 1rem; margin-bottom: 10px; color: #ff0055;">YOU WON!</h2>
            <div id="wonPrize" class="won-bear"></div>
            <h3 id="prizeTitle" style="margin: 5px 0;"></h3>
            <p id="prizeDesc" style="font-size: 0.8rem; line-height: 1.4; color: #555;"></p>
            <br>
            <button onclick="location.reload()" style="margin-top: 10px; background: none; border: none; color: #999; text-decoration: underline; cursor: pointer;">Play Again</button>
        </div>
    </div>

    <script>
        let pos = 50; // percentage
        const rig = document.getElementById('rig');
        const rod = document.getElementById('rod');
        const grabBtn = document.getElementById('grabBtn');
        let isGrabbing = false;

        // Bear Data
        const bears = [
            { id: 'bear1', pos: 10, icon: 'üß∏', title: 'The Classic Cuddler', desc: 'Coupon valid for 100 hours of unlimited cuddles. Non-transferable!' },
            { id: 'bear2', pos: 35, icon: 'üêº', title: 'The Lazy Panda', desc: 'Valid for one "Do Nothing Day" where we just eat snacks and roll around.' },
            { id: 'bear3', pos: 60, icon: 'üê®', title: 'The Clingy Koala', desc: 'Warning: This bear (me) will not let go of you once attached.' },
            { id: 'bear4', pos: 85, icon: 'üêª‚Äç‚ùÑÔ∏è', title: 'The Arctic Snuggler', desc: 'Expert at keeping you warm when the AC is too cold.' }
        ];

        function move(dir) {
            if (isGrabbing) return;
            if (dir === 'left' && pos > 10) pos -= 25;
            if (dir === 'right' && pos < 85) pos += 25;
            rig.style.left = pos + '%';
        }

        function grab() {
            if (isGrabbing) return;
            isGrabbing = true;
            grabBtn.disabled = true;

            // 1. Drop
            rod.style.height = '350px'; // Go down

            setTimeout(() => {
                // 2. Check Hit
                const wonBear = checkHit();
                
                // 3. Close Claw (Visual only for now)
                
                // 4. Retract
                rod.style.height = '60px'; // Go up
                
                if (wonBear) {
                    // Lift bear visual
                    const bearEl = document.getElementById(wonBear.id);
                    bearEl.style.transition = 'bottom 1s ease';
                    bearEl.style.bottom = '300px'; // Lift up with claw
                    
                    setTimeout(() => {
                        showWin(wonBear);
                    }, 1000);
                } else {
                    // Missed
                    setTimeout(() => {
                        isGrabbing = false;
                        grabBtn.disabled = false;
                    }, 1000);
                }

            }, 1000);
        }

        function checkHit() {
            // Check if current 'pos' aligns with any bear 'pos' (with tolerance)
            const tolerance = 10;
            return bears.find(b => Math.abs(b.pos - pos) <= tolerance);
        }

        function showWin(bear) {
            const modal = document.getElementById('winModal');
            document.getElementById('wonPrize').innerText = bear.icon;
            document.getElementById('prizeTitle').innerText = bear.title;
            document.getElementById('prizeDesc').innerText = bear.desc;
            
            modal.style.display = 'flex';
        }
    </script>
</body>
</html>